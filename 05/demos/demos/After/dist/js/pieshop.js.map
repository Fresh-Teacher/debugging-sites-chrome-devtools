{"version":3,"sources":["allPies.js","main.js"],"names":[],"mappings":"AAAA,MAAM,CAAC,MAAP,CAAgB,UAAW,CACzB,WAAW,GACX,eAAe,GACf,WAAW,GACX;AACD,CALD,CAOA,QAAS,CAAA,eAAT,EAA2B,CAEzB,GAAI,CAAA,eAAe,CAAG,QAAQ,CAAC,cAAT,CAAwB,UAAxB,CAAtB,CAEA,GAAI,CAAA,KAAK,CAAG,gBAAgB,EAA5B,CAEA,GAAG,KAAH,CAAU,CACR,eAAe,CAAC,SAAhB,CAA4B,qBAC7B,CAFD,IAGK,CACH,eAAe,CAAC,SAAhB,CAA4B,aAC7B,CAEF,CAED,QAAS,CAAA,gBAAT,EAA4B,CAE1B,GAAI,CAAA,YAAY,CAAG,GAAI,CAAA,IAAJ,GAAW,QAAX,EAAnB,CAEA,GAAG,YAAY,EAAI,CAAhB,EAAqB,YAAY,EAAI,CAAxC,CAA2C,CACzC,MAAO,KAAP,CAAa;AACd,CAFD,IAGK,CACH,MAAO,MAAP,CAAc;AACf,CACF,CAED,QAAS,CAAA,WAAT,CAAqB,WAArB,CAAkC,CAEhC,GAAG,WAAH,CAAgB,CACd,YAAY,CAAC,WAAD,CACb,CAFD,IAGK,CACH,WAAW,CAAG,cAAc,EAC7B,CAED,GAAI,CAAA,eAAe,CAAG,QAAQ,CAAC,cAAT,CAAwB,UAAxB,CAAtB,CAEA,eAAe,CAAC,SAAhB,CAA4B,WAE7B,CAED,QAAS,CAAA,WAAT,EAAuB,CACrB,GAAI,CAAA,QAAQ,CAAG,QAAQ,CAAC,cAAT,CAAwB,cAAxB,CAAf,CAEA,KAAK,CAAC,WAAD,CAAL,CACC,IADD,CACM,QAAQ,EAAI,QAAQ,CAAC,IAAT,EADlB,EAEC,IAFD,CAEM,IAAI,EAAI,CAEZ;AACA;AACA;AACA;AAEA;AAEA,GAAI,CAAA,WAAW,CAAG,IAAI,CAAC,SAAL,CAAe,IAAf,CAAlB,CAEA,GAAI,CAAA,SAAS,CAAG,EAAhB,CAEA,IAAI,CAAC,OAAL,CAAa,OAAO,EAAI,CACtB,SAAS,EAAK;;yBAEK,OAAO,CAAC,QAAS,sCAAqC,OAAO,CAAC,IAAK;gBAC5E,OAAO,CAAC,IAAK;gBACb,OAAO,CAAC,WAAY;gBACpB,OAAO,CAAC,KAAM;;;OAIzB,CAVD,EAYA,QAAQ,CAAC,SAAT,CAAqB,SAArB,CAEA;AACD,CA9BD,CA+BD,CAED,QAAS,CAAA,iBAAT,EAA6B,CAE3B,OAAO,CAAC,IAAR,CAAa,qEAAb,EAEA,KAAK,CAAC,gBAAD,CAAL,CACC,IADD,CACM,QAAQ,EAAI,QAAQ,CAAC,IAAT,EADlB,EAEC,IAFD,CAEM,IAAI,EAAI,OAAO,CAAC,GAAR,CAAY,IAAZ,CAFd,EAGC,KAHD,CAGO,GAAG,EAAI,OAAO,CAAC,KAAR,CAAc,6DAAd,CAHd,EAKA,OAAO,CAAC,IAAR,CAAa,0CAAb,CACD;AC/FD,QAAS,CAAA,YAAT,CAAsB,QAAtB,CAAgC,CAC9B,YAAY,CAAC,OAAb,CAAqB,aAArB,CAAoC,QAApC,CACD,CAED,QAAS,CAAA,cAAT,EAA0B,CAExB,GAAI,CAAA,QAAQ,CAAG,wBAAf,CAEA,GAAG,MAAM,CAAC,YAAV,CACA,CACI,GAAI,CAAA,OAAO,CAAG,MAAM,CAAC,YAArB,CACA,GAAG,OAAO,CAAC,OAAR,CAAgB,aAAhB,CAAH,CACA,CACI,QAAQ,CAAG,OAAO,CAAC,OAAR,CAAgB,aAAhB,CACd,CACJ,CAED,MAAO,CAAA,QACR","file":"pieshop.js","sourcesContent":["window.onload = function() {\r\n  loadAllPies();\r\n  setSeasonalLink();\r\n  setFavorite();\r\n  // loadNutritionInfo();\r\n}\r\n\r\nfunction setSeasonalLink() {\r\n\r\n  let seasonalElement = document.getElementById('seasonal');\r\n\r\n  let fresh = isFreshPieSeason();\r\n\r\n  if(fresh) {\r\n    seasonalElement.innerText = 'Fresh Seasonal Pies';\r\n  }\r\n  else {\r\n    seasonalElement.innerText = 'Frozen Pies';\r\n  }\r\n  \r\n}\r\n\r\nfunction isFreshPieSeason() {\r\n\r\n  let currentMonth = new Date().getMonth();\r\n\r\n  if(currentMonth >= 9 || currentMonth <= 3) {\r\n    return true; // October-April\r\n  }\r\n  else {\r\n    return false; // May-September\r\n  }\r\n}\r\n\r\nfunction setFavorite(newFavorite) {\r\n\r\n  if(newFavorite) {\r\n    saveFavorite(newFavorite);\r\n  }\r\n  else {\r\n    newFavorite = getFavoritePie();\r\n  }\r\n\r\n  let favoriteElement = document.getElementById('favorite');\r\n\r\n  favoriteElement.innerText = newFavorite;\r\n\r\n}\r\n\r\nfunction loadAllPies() {\r\n  let pieTable = document.getElementById('pieTableBody');\r\n\r\n  fetch('/api/pies')\r\n  .then(response => response.json())\r\n  .then(data => {\r\n\r\n    // console.groupCollapsed('pie data');\r\n    // console.dir(data);\r\n    // console.table(data);\r\n    // console.groupEnd();\r\n\r\n    // console.assert(data.length === 11, {pieCount: data.length, reason: 'Wrong number of pies'});\r\n\r\n    let string_data = JSON.stringify(data);\r\n\r\n    let pieMarkup = '';\r\n\r\n    data.forEach(element => {\r\n      pieMarkup += `\r\n        <tr>\r\n          <td><img src=${element.imageURL} width=\"100\" onclick=\"setFavorite('${element.name}')\"></td>\r\n          <td>${element.name}</td>\r\n          <td>${element.description}</td>\r\n          <td>${element.price}</td>\r\n          <td>View Details</td>\r\n        </tr>\r\n      `;\r\n    });\r\n\r\n    pieTable.innerHTML = pieMarkup;\r\n\r\n    // console.trace();\r\n  });\r\n}\r\n\r\nfunction loadNutritionInfo() {\r\n  \r\n  console.info('Attempting to retrieve the nutritional information from the server.');\r\n\r\n  fetch('/api/nutrition')\r\n  .then(response => response.json())\r\n  .then(data => console.log(data))\r\n  .catch(err => console.error('There was a problem retrieving the nutritional information.'));\r\n\r\n  console.warn('Eating too much pie is not good for you!');\r\n}","function saveFavorite(favorite) {\r\n  localStorage.setItem('favoritePie', favorite);\r\n}\r\n\r\nfunction getFavoritePie() {\r\n\r\n  let favorite = 'No favorite specified.';\r\n\r\n  if(window.localStorage)\r\n  {\r\n      let storage = window.localStorage;\r\n      if(storage.getItem('favoritePie'))\r\n      {\r\n          favorite = storage.getItem('favoritePie');\r\n      }\r\n  }\r\n\r\n  return favorite;\r\n}"]}